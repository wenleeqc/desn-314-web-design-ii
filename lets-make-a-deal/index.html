<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<style>
		* {
			box-sizing: border-box;
			margin: 0;
			padding: 0;
		}

		html {
			width: 100%;
			height: 100%;
		}

		body {
			height:  100%;
		}

		.container {
			height:  100%;
			display: flex;
			flex-direction: column;
			justify-content: center;
			align-items: center;
			background-color: pink;
			overflow: hidden;
		}

		.doors {
			display: flex;
			flex-direction: row;
			gap: 5em;
		}

		.door {
			display: flex;
			justify-content: center;
			align-items: center;
			border: 1em double #fff;
			/* border-top-left-radius: 50%;
			border-top-right-radius: 50%; */
			border-radius: 49% 51% 10% 10% / 19% 18% 0% 0%;
			width:  15em;
			height:  20em;
			cursor:  pointer;
		}

		.door-1 {
			background-color: blue;
		}

		.door-1:hover {
			background-color: darkblue;
		}

		.door-2 {
			background-color: red;
		}

		.door-3 {
			background-color: green;
		}

		.door > p {
			font-size: 1em;
			font-weight: bold;
			text-transform: uppercase;
			text-align: center;
			background-color: #fff;
		}

		.door > p.number {
			font-size: 5em;
			border-radius: 50%;
			width: 1.3em;
			height: 1.2em;
		}

		.btn {
			border: 1em solid #fff;
			border-radius: 25px;
			background-color: transparent;
			padding: .5em 1em;
			cursor: pointer;
			visibility: hidden;
		}

		h1 {
			font-size: 6em;
			color: #fff;
		}

		.text-response {
			font-size: 3em;
		}
	</style>
	<title>Skills Assignment 2 - Let's Make a Deal!</title>
</head>
<body>
	<div class="container">
		<h1>Let's Make A Deal</h1>
		<div class="doors">
			<div class="door door-1"><p class="number">1</p></div>
			<div class="door door-2"><p class="number">2</p></div>
			<div class="door door-3"><p class="number">3</p></div>
		</div>
		<div class="text-response">Choose a door. Win a prize!</div>
		<button class="btn">Play again?</button>
	</div>

	<script>
		const doors = document.querySelectorAll(".door");
		console.log(doors);
		const textResponse = document.querySelector(".text-response");
		const btn = document.querySelector(".btn");
		const prizeList = ['a new car', 'a bag of rice' , '1 million dollars', '50 bucks', 'student debt relief', 'an apple', 'an all expenses paid vacation', 'a subway card', 'a big screen tv', 'a bar of soap', 'a bar of gold', 'a bar of chocolate'];
		let hasChosenDoor = false;

		let prizes = setPrizes();
		console.log('prizes', prizes);
		handleDoors();

		btn.addEventListener('click', resetGame);

		function handleDoors() {
			for(let i=0; i < doors.length; i++) {
				doors[i].addEventListener('click', handleDoorClick);
			}
		}

		function handleDoorClick(element) {
			console.log('element 1', element);
			const numDoor = element.target.textContent;
			console.log(numDoor);
			//element.target.innerHTML = `<p>${prizes[numDoor-1]}</p>`;
			//element.classList.remove('number');
			//element.target.textContent = `${prizes[numDoor-1]}`;
			console.log('element', element.target);
			if(element.target.classList.contains('door')) {
				console.log(true);
				element.target.innerHTML = `<p>${prizes[numDoor-1]}</p>`;
			} else {
				console.log(false);
				element.target.parentNode.innerHTML =`<p>${prizes[numDoor-1]}</p>`;
			}

			if(!hasChosenDoor) {
				textResponse.textContent = `You win ${element.target.textContent}!`;
				btn.style.visibility = "visible";
				hasChosenDoor = true;
				console.log('has chosen')
			}
			
			element.target.removeEventListener('click', handleDoorClick);
		}

		function setPrizes() {
			const prizes = [];
			while(prizes.length < doors.length) {
				let index = Math.floor(Math.random() * prizeList.length);
				if(prizes.includes(prizeList[index])) {
					console.log('in list');
					continue;
				} else {
					prizes.push(prizeList[index]);
					console.log(prizes);
				}
			}
			return prizes;

			// for(let i=0; i < doors.length; i++) {
			// 	doors[i].innerHTML = `<p style="visibility: hidden;">${prizes[i]}</p>`;
			// }
		}

		function resetGame() {
			console.log('test')
			btn.style.visibility = "hidden";
			textResponse.textContent = "Choose a door. Win a prize!";
			hasChosenDoor = false;

			const doors = document.querySelectorAll('.door');
			for(let i = 0; i < doors.length; i++) {
				doors[i].innerHTML = `<p class="number">${i+1}<p>`;
			}

			prizes = setPrizes();
			handleDoors();
			console.log('reset...');
			console.log(doors);
		}
	</script>
</body>
</html>