<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<style>
		* {
			box-sizing: border-box;
			margin: 0;
			padding: 0;
		}

		html {
			width: 100%;
			height: 100%;
		}

		body {
			height:  100%;
		}

		.container {
			height:  100%;
			display: flex;
			flex-direction: column;
			justify-content: center;
			align-items: center;
			background-color: pink;
			overflow: hidden;
		}

		.doors {
			display: flex;
			flex-direction: row;
		}

		.door {
			width:  5em;
			height:  10em;
			margin-right:  2em;
			cursor:  pointer;
		}

		.door-1 {
			background-color: blue;
		}

		.door-2 {
			background-color: red;
		}

		.door-3 {
			background-color: green;
		}

		.btn {
			border: 1em solid #fff;
			border-radius: 25px;
			background-color: transparent;
			padding: .5em 1em;
			cursor: pointer;
			visibility: hidden;
		}
	</style>
	<title>Skills Assignment 2 - Let's Make a Deal!</title>
</head>
<body>
	<div class="container">
		<div class="doors">
			<div class="door door-1"></div>
			<div class="door door-2"></div>
			<div class="door door-3"></div>
		</div>
		<div class="text-response">Choose a door. Win a prize!</div>
		<button class="btn">Play again?</button>
	</div>

	<script>
		const doors = document.querySelectorAll(".door");
		console.log(doors);
		const textResponse = document.querySelector(".text-response");
		const btn = document.querySelector(".btn");
		const prizeList = ['a new car', 'a bag of rice' , '1 million dollars', '50 bucks', 'student debt relief', 'an apple', 'a all expenses paid vacation', 'a subway card', 'a big screen tv'];
		let hasChosenDoor = false;

		setPrizes();
		handleDoors();

		btn.addEventListener('click', resetGame);

		function handleDoorClick(element) {
				console.log(element.target.children[0].style);
				element.target.children[0].style.visibility = "visible";

				if(!hasChosenDoor) {
					textResponse.textContent = `You won ${element.target.children[0].textContent}!`;
					btn.style.visibility = "visible";
					hasChosenDoor = true;
					console.log('has chosen')
				}
				
				element.target.removeEventListener('click', handleDoorClick);
		}

		function handleDoors() {
			for(let i=0; i < doors.length; i++) {
				doors[i].addEventListener('click', handleDoorClick);
			}
		}

		function setPrizes() {
			const prizes = [];
			while(prizes.length < doors.length) {
				let index = Math.floor(Math.random() * prizeList.length);
				if(prizes.includes(prizeList[index])) {
					console.log('in list');
					continue;
				} else {
					prizes.push(prizeList[index]);
					console.log(prizes);
				}
			}

			for(let i=0; i < doors.length; i++) {
				doors[i].innerHTML = `<p style="visibility: hidden;">${prizes[i]}</p>`;
			}
		}

		function resetGame() {
			console.log('test')
			btn.style.visibility = "hidden";
			textResponse.textContent = "Choose a door. Win a prize!";
			hasChosenDoor = false;

			const doors = document.querySelectorAll('.door');
			doors.forEach((e) => {
				e.innerHTML = "";
			});

			setPrizes();
			handleDoors();
			console.log('reset...');
			console.log(doors);
		}
	</script>
</body>
</html>